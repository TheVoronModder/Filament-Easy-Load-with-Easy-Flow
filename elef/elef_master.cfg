# printer.cfg
# config/
# └─ elef/
#    ├─ elef_master.cfg      ← EDIT THIS ONLY
#    ├─ elef_macros.cfg      ← no edits
#    └─ elef_helpers.cfg     ← no edits


# =============================================================================
# ELEF Autoloader — MASTER SETTINGS (edit this file only)
# =============================================================================

# --- Entry sensor (at feeder): triggers autoload when filament is inserted ---
[filament_switch_sensor elef_entry]
switch_pin: <PIN_FOR_ENTRY_SWITCH>     # e.g. ^PB7  (add ^ to invert)
pause_on_runout: False
insert_gcode:
  ELEF_AUTOLOAD

# --- Toolhead sensor (at hotend): stops fast feed when filament arrives ---
[filament_switch_sensor elef_toolhead]
switch_pin: <PIN_FOR_TOOLHEAD_SWITCH>  # e.g. ^PC3
pause_on_runout: False

# --- Bowden feeder stepper (the assist motor) ---
[extruder_stepper elef_feeder]
step_pin: <STEP_PIN>                   # e.g. PD0
dir_pin: <DIR_PIN>                     # add '!' if direction is wrong
enable_pin: <EN_PIN>
microsteps: 16
full_steps_per_rotation: 200
rotation_distance: <ROT_DIST>          # mm/shaft rev; set for your drive
# gear_ratio: <A:B>                    # optional

# --- ELEF defaults (read by macros; change here, not in macro files) ---
[gcode_macro ELEF_DEFAULTS]
variable_prefeed_speed: 300.0          # mm/s during fast feed
variable_chunk_mm: 25.0                # mm per loop (poll sensor between moves)
variable_max_mm: 2000.0                # absolute safety cap
variable_follow_after: 1               # 1 = keep following extruder after arrival
gcode:

# --- Include read-only macro files ---
[include config/elef/elef_macros.cfg]
[include config/elef/elef_helpers.cfg]
